# 이미지 매칭 기능

## 개요

상품명과 이미지 파일명을 자동으로 매칭하여 적절한 이미지를 표시하는 기능입니다.

## 기능

### 1. 이미지 최적화

- **Next.js Image 컴포넌트 사용**: 자동 이미지 최적화 (WebP, AVIF 변환)
- **반응형 이미지**: 디바이스 크기에 맞는 이미지 제공
- **Lazy Loading**: 화면에 보일 때만 로드

### 2. 이미지 매칭 알고리즘

#### 매칭 우선순위

1. **정확한 매칭 (한글)**
   - 예: "샤인 머스캣" ↔ "샤인 머스캣.jpeg"
   - 가장 높은 우선순위

2. **정확한 매칭 (로마자 변환)**
   - 예: "샤인 머스캣" ↔ "shine muscat.jpg"
   - 높은 우선순위

3. **역방향 매칭**
   - 예: "Choco Pie" ↔ "초코 파이"
   - 높은 우선순위

4. **교차 매칭**
   - 한글 파일명 ↔ 영어 상품명
   - 영어 파일명 ↔ 한글 상품명
   - 중간 우선순위

5. **부분 매칭**
   - 단어 단위로 매칭
   - 최소 일정 수준 이상 매칭 필요
   - 낮은 우선순위

6. **유사도 기반 매칭**
   - 레벤슈타인 거리 기반
   - 최소 일정 수준 이상 유사도 필요
   - 낮은 우선순위

#### 매칭 실패 시

- 매칭 점수가 기준 미만이면 매칭 실패
- "이미지 준비중" placeholder 표시

### 3. 에러 처리

- **이미지 로딩 실패**: 자동으로 placeholder 표시
- **매칭 실패**: 상품 데이터는 정상 표시, 이미지만 placeholder
- **파일 읽기 실패**: 에러 로깅 후 계속 진행

## 사용 방법

### 이미지 파일 추가

1. `public/` 폴더에 이미지 파일 추가
2. 파일명은 상품명과 유사하게 작성 (한글 또는 영어)
3. 지원 확장자: `.jpg`, `.jpeg`, `.png`, `.webp`, `.gif`, `.svg`

### 예시

```
public/
  ├─ 샤인 머스캣.jpeg    # "샤인 머스캣" 상품과 매칭
  ├─ Choco Pie.jpg       # "초코 파이" 또는 "Choco Pie" 상품과 매칭
  └─ 인절미 과자.png      # "고소한 인절미 과자" 상품과 부분 매칭
```

## 알고리즘 상세

### 문자열 정규화

- 소문자 변환
- 공백 정규화
- 특수문자 제거 (한글, 영문, 숫자만 유지)

### 한글-영어 매핑

현재 지원하는 매핑:

- 샤인 ↔ shine
- 머스캣 ↔ muscat
- 초코/초콜릿 ↔ choco/chocolate
- 파이 ↔ pie
- 과자 ↔ cookie
- 인절미 ↔ injeolmi

### 유사도 계산

레벤슈타인 거리 알고리즘 사용:

```
유사도 = 1 - (거리 / 최대 길이)
```

## 성능 최적화

- **캐싱**: 이미지 파일 목록을 메모리에 캐시
- **배치 처리**: 여러 상품에 대해 병렬로 매칭 수행
- **조기 종료**: 정확한 매칭 발견 시 즉시 반환

## 개발 환경 로깅

개발 환경에서는 매칭 결과를 콘솔에 출력:

```
[Image Match] "샤인 머스캣" -> "/샤인 머스캣.jpeg" (method: exact)
[Image Match] No match found for "알 수 없는 상품"
```

## 확장 가능성

새로운 매핑을 추가하려면 `lib/image-matcher.ts`의 `koreanToRoman` 함수를 수정하세요.
